

CREATE TABLE IF NOT EXISTS users(
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50)   NOT NULL,
    password VARCHAR(20) NOT NULL,
    email VARCHAR(40) NOT NULL,
    created_at DATETIME NOT NULL DEFAULT CURRENT_DATE(),
    role VARCHAR(15) NOT NULL,

    UNIQUE (username)
);

CREATE TABLE IF NOT EXISTS roles (
    id  INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL
                                 );

CREATE TABLE user_roles (
                            user_id INT NOT NULL,
                            role_id INT NOT NULL,
                            FOREIGN KEY (user_id) REFERENCES users (id),
                            FOREIGN KEY (role_id) REFERENCES roles (id)
);

CREATE TABLE IF NOT EXISTS trader(
                                     id BIGINT AUTO_INCREMENT PRIMARY KEY,
                                     company_name VARCHAR(50)   NOT NULL,
    first_name VARCHAR(50)   NOT NULL,
    last_name VARCHAR(70)  NOT NULL,
    password VARCHAR(20) NOT NULL,
    email VARCHAR(40) NOT NULL,
    created_at DATETIME NOT NULL DEFAULT CURRENT_DATE()

    );

CREATE TABLE IF NOT EXISTS comment(
                                      id BIGINT AUTO_INCREMENT PRIMARY KEY,
                                      message TEXT NOT NULL,
                                      post_id BIGINT NOT NULL,
                                      author_id BIGINT NOT NULL,
                                      created_at DATETIME NOT NULL DEFAULT CURRENT_DATE(),
    approved VARCHAR(15) NOT NULL DEFAULT 'INPROCESS',
    FOREIGN KEY (author_id) REFERENCES users(id),
    FOREIGN KEY (post_id) REFERENCES game_object(id)

    );

CREATE TABLE IF NOT EXISTS game_object(

                                          id BIGINT AUTO_INCREMENT PRIMARY KEY,
                                          title VARCHAR(50)   NOT NULL,
    description TEXT NOT NULL,
    rating DOUBLE NOT NULL DEFAULT 0,
    author_id BIGINT NOT NULL,
    created_at DATETIME NOT NULL DEFAULT CURRENT_DATE(),
    updated_at DATETIME NOT NULL DEFAULT CURRENT_DATE(),
    game_id BIGINT NOT NULL,
    status VARCHAR(15) NOT NULL DEFAULT 'INPROCESS',
    FOREIGN KEY (author_id) REFERENCES trader(id),
    FOREIGN KEY (game_id) REFERENCES game(id)

    );

CREATE TABLE IF NOT EXISTS game(
                                   id BIGINT AUTO_INCREMENT PRIMARY KEY,
                                   name VARCHAR(50)   NOT NULL
    )
